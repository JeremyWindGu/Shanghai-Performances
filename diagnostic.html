<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Diagnostic Tools</title>
    <style>
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            margin: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            color: #e0e0e0;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(40, 40, 40, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }
        .section {
            border: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            background: rgba(60, 60, 60, 0.8);
        }
        .result {
            background-color: rgba(80, 80, 80, 0.8);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            color: #e0e0e0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        button {
            background: rgba(160, 120, 80, 0.8);
            color: #e0e0e0;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-family: 'Georgia', serif;
            font-weight: 500;
            letter-spacing: 0.5px;
            transition: all 0.4s ease;
        }
        button:hover {
            background: rgba(180, 140, 100, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.3);
        }
        .status {
            padding: 12px;
            margin: 12px 0;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .success { background-color: rgba(120, 160, 120, 0.8); color: #e0e0e0; }
        .error { background-color: rgba(160, 120, 120, 0.8); color: #e0e0e0; }
        .warning { background-color: rgba(160, 160, 120, 0.8); color: #e0e0e0; }
        .info { background-color: rgba(120, 140, 160, 0.8); color: #e0e0e0; }
        .progress {
            width: 100%;
            height: 20px;
            background-color: rgba(80, 80, 80, 0.8);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .progress-bar {
            height: 100%;
            background-color: #c0a080;
            transition: width 0.3s ease;
        }
        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(52, 152, 219, 0.8);
            color: #e0e0e0;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .language-toggle:hover {
            background: rgba(52, 152, 219, 0.9);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <button class="language-toggle" onclick="toggleLanguage()" data-en="‰∏≠Êñá" data-zh="English">‰∏≠Êñá</button>
    
    <div class="container">
        <h1 data-en="Application Diagnostic Tools" data-zh="Â∫îÁî®ËØäÊñ≠Â∑•ÂÖ∑">Application Diagnostic Tools</h1>
        <p data-en="This tool helps diagnose and resolve issues in the application." data-zh="Ëøô‰∏™Â∑•ÂÖ∑ÂèØ‰ª•Â∏ÆÂä©ËØäÊñ≠ÂíåËß£ÂÜ≥Â∫îÁî®‰∏≠ÁöÑÈóÆÈ¢ò„ÄÇ">This tool helps diagnose and resolve issues in the application.</p>
        
        <div class="section">
            <h3 data-en="Quick Diagnosis" data-zh="Âø´ÈÄüËØäÊñ≠">Quick Diagnosis</h3>
            <p data-en="Click the button below to perform a comprehensive system diagnosis:" data-zh="ÁÇπÂáª‰∏ãÈù¢ÁöÑÊåâÈíÆËøõË°åÂÖ®Èù¢ÁöÑÁ≥ªÁªüËØäÊñ≠Ôºö">Click the button below to perform a comprehensive system diagnosis:</p>
            <button onclick="runFullDiagnostic()" data-en="Start Full Diagnosis" data-zh="ÂºÄÂßãÂÖ®Èù¢ËØäÊñ≠">Start Full Diagnosis</button>
            <div id="full-diagnostic-result" class="result" data-en="Click 'Start Full Diagnosis' button to check all system components" data-zh="ÁÇπÂáª'ÂºÄÂßãÂÖ®Èù¢ËØäÊñ≠'ÊåâÈíÆÊù•Ê£ÄÊü•ÊâÄÊúâÁ≥ªÁªüÁªÑ‰ª∂">
                Click 'Start Full Diagnosis' button to check all system components
            </div>
        </div>

        <div class="section">
            <h3 data-en="Data Validation" data-zh="Êï∞ÊçÆÈ™åËØÅ">Data Validation</h3>
            <p data-en="Validate CSV data file formats and content:" data-zh="È™åËØÅCSVÊï∞ÊçÆÊñá‰ª∂ÁöÑÊ†ºÂºèÂíåÂÜÖÂÆπÔºö">Validate CSV data file formats and content:</p>
            <button onclick="validateDataFiles()" data-en="Validate Data Files" data-zh="È™åËØÅÊï∞ÊçÆÊñá‰ª∂">Validate Data Files</button>
            <div id="data-validation-result" class="result" data-en="Click 'Validate Data Files' button to check data format" data-zh="ÁÇπÂáª'È™åËØÅÊï∞ÊçÆÊñá‰ª∂'ÊåâÈíÆÊù•Ê£ÄÊü•Êï∞ÊçÆÊ†ºÂºè">
                Click 'Validate Data Files' button to check data format
            </div>
        </div>

        <div class="section">
            <h3 data-en="Animation Test" data-zh="Âä®ÁîªÊµãËØï">Animation Test</h3>
            <p data-en="Test animation speed and time calculation:" data-zh="ÊµãËØïÂä®ÁîªÈÄüÂ∫¶ÂíåÊó∂Èó¥ËÆ°ÁÆóÔºö">Test animation speed and time calculation:</p>
            <button onclick="testAnimationSpeed()" data-en="Test Animation Speed" data-zh="ÊµãËØïÂä®ÁîªÈÄüÂ∫¶">Test Animation Speed</button>
            <div id="animation-test-result" class="result" data-en="Click 'Test Animation Speed' button to verify animation control" data-zh="ÁÇπÂáª'ÊµãËØïÂä®ÁîªÈÄüÂ∫¶'ÊåâÈíÆÊù•È™åËØÅÂä®ÁîªÊéßÂà∂">
                Click 'Test Animation Speed' button to verify animation control
            </div>
        </div>

        <div class="section">
            <h3 data-en="Map Projection Test" data-zh="Âú∞ÂõæÊäïÂΩ±ÊµãËØï">Map Projection Test</h3>
            <p data-en="Test map projection and range settings:" data-zh="ÊµãËØïÂú∞ÂõæÊäïÂΩ±ÂíåËåÉÂõ¥ËÆæÁΩÆÔºö">Test map projection and range settings:</p>
            <button onclick="testMapProjection()" data-en="Test Map Projection" data-zh="ÊµãËØïÂú∞ÂõæÊäïÂΩ±">Test Map Projection</button>
            <div id="map-test-result" class="result" data-en="Click 'Test Map Projection' button to verify map settings" data-zh="ÁÇπÂáª'ÊµãËØïÂú∞ÂõæÊäïÂΩ±'ÊåâÈíÆÊù•È™åËØÅÂú∞ÂõæËÆæÁΩÆ">
                Click 'Test Map Projection' button to verify map settings
            </div>
        </div>

        <div class="section">
            <h3 data-en="Troubleshooting" data-zh="ÈóÆÈ¢òÊéíÊü•">Troubleshooting</h3>
            <p data-en="Common problem solutions:" data-zh="Â∏∏ËßÅÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°àÔºö">Common problem solutions:</p>
            <div id="troubleshooting" class="result">
                <strong data-en="Common Issues:" data-zh="Â∏∏ËßÅÈóÆÈ¢òÔºö">Common Issues:</strong>
                
                <div data-en="1. Animation speed too fast:
   - Fixed: Limited single increment to 2 minutes
   - 30 minutes map time = 1 second real time

2. Map range too large:
   - Fixed: Auto-center on venue, 2km radius
   - Dynamic projection range adjustment

3. Data loading failure:
   - Check if CSV files exist
   - Verify file format is correct

4. Map base layer not displaying:
   - Fixed: Simplified background, removed fixed boundaries
   - Using dynamic grid background" data-zh="1. Âä®ÁîªÈÄüÂ∫¶ËøáÂø´Ôºö
   - Â∑≤‰øÆÂ§çÔºöÈôêÂà∂ÂçïÊ¨°Â¢ûÈáè‰∏∫2ÂàÜÈíü
   - 30ÂàÜÈíüÂú∞ÂõæÊó∂Èó¥ = 1ÁßíÁé∞ÂÆûÊó∂Èó¥

2. Âú∞ÂõæËåÉÂõ¥ËøáÂ§ßÔºö
   - Â∑≤‰øÆÂ§çÔºöËá™Âä®‰ª•Âú∫Âú∞‰∏∫‰∏≠ÂøÉÔºå2kmÂçäÂæÑ
   - Âä®ÊÄÅË∞ÉÊï¥ÊäïÂΩ±ËåÉÂõ¥

3. Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•Ôºö
   - Ê£ÄÊü•CSVÊñá‰ª∂ÊòØÂê¶Â≠òÂú®
   - È™åËØÅÊñá‰ª∂Ê†ºÂºèÊòØÂê¶Ê≠£Á°Æ

4. Âú∞ÂõæÂ∫ïÂõæ‰∏çÊòæÁ§∫Ôºö
   - Â∑≤‰øÆÂ§çÔºöÁÆÄÂåñËÉåÊôØÔºåÁßªÈô§Âõ∫ÂÆöËæπÁïå
   - ‰ΩøÁî®Âä®ÊÄÅÁΩëÊ†ºËÉåÊôØ">
1. Animation speed too fast:
   - Fixed: Limited single increment to 2 minutes
   - 30 minutes map time = 1 second real time

2. Map range too large:
   - Fixed: Auto-center on venue, 2km radius
   - Dynamic projection range adjustment

3. Data loading failure:
   - Check if CSV files exist
   - Verify file format is correct

4. Map base layer not displaying:
   - Fixed: Simplified background, removed fixed boundaries
   - Using dynamic grid background
                </div>
            </div>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        let currentLanguage = 'en';

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'zh' : 'en';
            updatePageLanguage();
        }

        function updatePageLanguage() {
            const elements = document.querySelectorAll('[data-en][data-zh]');
            elements.forEach(element => {
                const text = element.getAttribute(`data-${currentLanguage}`);
                if (text) {
                    element.textContent = text;
                }
            });
            
            document.documentElement.lang = currentLanguage === 'en' ? 'en' : 'zh-CN';
        }

        async function runFullDiagnostic() {
            const result = document.getElementById('full-diagnostic-result');
            result.innerHTML = currentLanguage === 'en' ? 'üîÑ Running full diagnosis...\n' : 'üîÑ Ê≠£Âú®ËøõË°åÂÖ®Èù¢ËØäÊñ≠...\n';
            
            let diagnostics = '';
            
            // 1. Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅ
            diagnostics += currentLanguage === 'en' ? '=== Browser Support Check ===\n' : '=== ÊµèËßàÂô®ÊîØÊåÅÊ£ÄÊü• ===\n';
            const hasFetch = typeof fetch !== 'undefined';
            const hasD3 = typeof d3 !== 'undefined';
            const hasConsole = typeof console !== 'undefined';
            
            diagnostics += `Fetch API: ${hasFetch ? '‚úÖ Supported' : '‚ùå Not Supported'}\n`;
            diagnostics += `D3.js: ${hasD3 ? '‚úÖ Supported' : '‚ùå Not Supported'}\n`;
            diagnostics += `Console: ${hasConsole ? '‚úÖ Supported' : '‚ùå Not Supported'}\n\n`;
            
            // 2. Ê£ÄÊü•Êñá‰ª∂Â≠òÂú®ÊÄß
            diagnostics += currentLanguage === 'en' ? '=== File Existence Check ===\n' : '=== Êñá‰ª∂Â≠òÂú®ÊÄßÊ£ÄÊü• ===\n';
            const files = [
                'data/shanghai_performances.csv',
                'data/shanghai_metro_stations.csv',
                'data/event_flow_calculated.csv',
                'index.html',
                'script.js',
                'styles.css',
                'data-loader.js'
            ];
            
            for (const file of files) {
                try {
                    const response = await fetch(file);
                    diagnostics += `${file}: ${response.ok ? '‚úÖ Exists' : '‚ùå Not Found'}\n`;
                } catch (error) {
                    diagnostics += `${file}: ‚ùå Error - ${error.message}\n`;
                }
            }
            diagnostics += '\n';
            
            // 3. Ê£ÄÊü•Êï∞ÊçÆÊ†ºÂºè
            diagnostics += currentLanguage === 'en' ? '=== Data Format Check ===\n' : '=== Êï∞ÊçÆÊ†ºÂºèÊ£ÄÊü• ===\n';
            try {
                const perfResponse = await fetch('data/shanghai_performances.csv');
                const perfText = await perfResponse.text();
                const perfLines = perfText.split('\n');
                const header = perfLines[0];
                const dataLines = perfLines.slice(1).filter(line => line.trim());
                
                diagnostics += currentLanguage === 'en' ? 'Performance Venue Data:\n' : 'Ë°®ÊºîÂú∫Âú∞Êï∞ÊçÆ:\n';
                diagnostics += currentLanguage === 'en' ? `  Total Lines: ${perfLines.length}\n` : `  ÊÄªË°åÊï∞: ${perfLines.length}\n`;
                diagnostics += currentLanguage === 'en' ? `  Data Lines: ${dataLines.length}\n` : `  Êï∞ÊçÆË°åÊï∞: ${dataLines.length}\n`;
                diagnostics += currentLanguage === 'en' ? `  Header: ${header}\n` : `  Ê†áÈ¢ò: ${header}\n`;
                
                if (dataLines.length > 0) {
                    const firstDataLine = dataLines[0];
                    const columns = firstDataLine.split(',');
                    diagnostics += currentLanguage === 'en' ? `  First Line Columns: ${columns.length}\n` : `  Á¨¨‰∏ÄË°åÂàóÊï∞: ${columns.length}\n`;
                    diagnostics += currentLanguage === 'en' ? `  First Line: ${firstDataLine.substring(0, 100)}...\n` : `  Á¨¨‰∏ÄË°å: ${firstDataLine.substring(0, 100)}...\n`;
                }
            } catch (error) {
                diagnostics += currentLanguage === 'en' ? `Performance Venue Data: ‚ùå Read Failed - ${error.message}\n` : `Ë°®ÊºîÂú∫Âú∞Êï∞ÊçÆ: ‚ùå ËØªÂèñÂ§±Ë¥• - ${error.message}\n`;
            }
            
            result.innerHTML = diagnostics;
        }

        async function validateDataFiles() {
            const result = document.getElementById('data-validation-result');
            result.innerHTML = currentLanguage === 'en' ? 'üîÑ Validating data files...\n' : 'üîÑ Ê≠£Âú®È™åËØÅÊï∞ÊçÆÊñá‰ª∂...\n';
            
            let validation = '';
            
            // È™åËØÅË°®ÊºîÂú∫Âú∞Êï∞ÊçÆ
            try {
                const perfResponse = await fetch('data/shanghai_performances.csv');
                const perfText = await perfResponse.text();
                const lines = perfText.split('\n').filter(line => line.trim());
                
                validation += currentLanguage === 'en' ? '=== Performance Venue Data Validation ===\n' : '=== Ë°®ÊºîÂú∫Âú∞Êï∞ÊçÆÈ™åËØÅ ===\n';
                validation += currentLanguage === 'en' ? `Total Records: ${lines.length - 1}\n` : `ÊÄªËÆ∞ÂΩïÊï∞: ${lines.length - 1}\n`;
                
                if (lines.length > 1) {
                    const header = lines[0].split(',');
                    const firstData = lines[1].split(',');
                    
                    validation += currentLanguage === 'en' ? `Header Columns: ${header.length}\n` : `Ê†áÈ¢òÂàóÊï∞: ${header.length}\n`;
                    validation += currentLanguage === 'en' ? `Data Columns: ${firstData.length}\n` : `Êï∞ÊçÆÂàóÊï∞: ${firstData.length}\n`;
                    
                    // Ê£ÄÊü•ÂÖ≥ÈîÆÂàó
                    const requiredColumns = ['Performance', 'Venue Name', 'geometry'];
                    for (const col of requiredColumns) {
                        const index = header.findIndex(h => h.trim() === col);
                        validation += `${col}: ${index >= 0 ? '‚úÖ Exists' : '‚ùå Missing'} (Index: ${index})\n`;
                    }
                    
                    // Ê£ÄÊü•Âá†‰ΩïÊï∞ÊçÆÊ†ºÂºè
                    const geometryIndex = header.findIndex(h => h.trim() === 'geometry');
                    if (geometryIndex >= 0 && firstData[geometryIndex]) {
                        const geometry = firstData[geometryIndex];
                        const pointMatch = geometry.match(/POINT\s*\(([^)]+)\)/);
                        if (pointMatch) {
                            const coords = pointMatch[1].trim().split(/\s+/);
                            if (coords.length >= 2) {
                                validation += currentLanguage === 'en' ? `Geometry Format: ‚úÖ Correct (${coords.length} coordinates)\n` : `Âá†‰ΩïÊ†ºÂºè: ‚úÖ Ê≠£Á°Æ (${coords.length} ‰∏™ÂùêÊ†á)\n`;
                                validation += currentLanguage === 'en' ? `Coordinates: [${coords.join(', ')}]\n` : `ÂùêÊ†áÂÄº: [${coords.join(', ')}]\n`;
                            } else {
                                validation += currentLanguage === 'en' ? `Geometry Format: ‚ùå Insufficient coordinates\n` : `Âá†‰ΩïÊ†ºÂºè: ‚ùå ÂùêÊ†áÊï∞Èáè‰∏çË∂≥\n`;
                            }
                        } else {
                            validation += currentLanguage === 'en' ? `Geometry Format: ‚ùå Format mismatch\n` : `Âá†‰ΩïÊ†ºÂºè: ‚ùå Ê†ºÂºè‰∏çÂåπÈÖç\n`;
                            validation += currentLanguage === 'en' ? `Original Data: "${geometry}"\n` : `ÂéüÂßãÊï∞ÊçÆ: "${geometry}"\n`;
                        }
                    } else {
                        validation += currentLanguage === 'en' ? `Geometry Format: ‚ùå Missing geometry column or data\n` : `Âá†‰ΩïÊ†ºÂºè: ‚ùå Áº∫Â∞ëgeometryÂàóÊàñÊï∞ÊçÆ\n`;
                    }
                }
            } catch (error) {
                validation += currentLanguage === 'en' ? `Performance Venue Data: ‚ùå Validation Failed - ${error.message}\n` : `Ë°®ÊºîÂú∫Âú∞Êï∞ÊçÆ: ‚ùå È™åËØÅÂ§±Ë¥• - ${error.message}\n`;
            }
            
            result.innerHTML = validation;
        }

        function testAnimationSpeed() {
            const result = document.getElementById('animation-test-result');
            result.innerHTML = currentLanguage === 'en' ? 'üîÑ Testing animation speed...\n' : 'üîÑ Ê≠£Âú®ÊµãËØïÂä®ÁîªÈÄüÂ∫¶...\n';
            
            let testResult = currentLanguage === 'en' ? '=== Animation Speed Test ===\n' : '=== Âä®ÁîªÈÄüÂ∫¶ÊµãËØï ===\n';
            
            // Ê®°ÊãüÂä®ÁîªËÆ°ÁÆó
            const testCases = [
                { elapsed: 1000, expected: 5 },
                { elapsed: 2000, expected: 10 },
                { elapsed: 500, expected: 2.5 }
            ];
            
            testCases.forEach((testCase, index) => {
                const timeIncrement = (testCase.elapsed / 1000) * 5;
                const maxIncrement = 1;
                const actualIncrement = Math.min(timeIncrement, maxIncrement);
                
                testResult += currentLanguage === 'en' ? `Test ${index + 1}:\n` : `ÊµãËØï ${index + 1}:\n`;
                testResult += currentLanguage === 'en' ? `  Elapsed Time: ${testCase.elapsed}ms\n` : `  ÁªèËøáÊó∂Èó¥: ${testCase.elapsed}ms\n`;
                testResult += currentLanguage === 'en' ? `  Expected Increment: ${testCase.expected} minutes\n` : `  ÊúüÊúõÂ¢ûÈáè: ${testCase.expected}ÂàÜÈíü\n`;
                testResult += currentLanguage === 'en' ? `  Calculated Increment: ${timeIncrement.toFixed(2)} minutes\n` : `  ËÆ°ÁÆóÂ¢ûÈáè: ${timeIncrement.toFixed(2)}ÂàÜÈíü\n`;
                testResult += currentLanguage === 'en' ? `  Actual Increment: ${actualIncrement.toFixed(2)} minutes\n` : `  ÂÆûÈôÖÂ¢ûÈáè: ${actualIncrement.toFixed(2)}ÂàÜÈíü\n`;
                testResult += currentLanguage === 'en' ? `  Result: ${Math.abs(actualIncrement - testCase.expected) < 2 ? '‚úÖ Pass' : '‚ùå Fail'}\n\n` : `  ÁªìÊûú: ${Math.abs(actualIncrement - testCase.expected) < 2 ? '‚úÖ ÈÄöËøá' : '‚ùå Â§±Ë¥•'}\n\n`;
            });
            
            result.innerHTML = testResult;
        }

        function testMapProjection() {
            const result = document.getElementById('map-test-result');
            result.innerHTML = currentLanguage === 'en' ? 'üîÑ Testing map projection...\n' : 'üîÑ Ê≠£Âú®ÊµãËØïÂú∞ÂõæÊäïÂΩ±...\n';
            
            let testResult = currentLanguage === 'en' ? '=== Map Projection Test ===\n' : '=== Âú∞ÂõæÊäïÂΩ±ÊµãËØï ===\n';
            
            // ÊµãËØï‰∏çÂêåÁöÑÂú∫Âú∞ÂùêÊ†á
            const testVenues = [
                { name: 'Jasmine Theater', coords: [121.485, 31.23] },
                { name: 'Shanghai Grand Theater', coords: [121.482, 31.231] },
                { name: 'Shanghai Dramatic Arts Center', coords: [121.44, 31.22] },
                { name: 'Oriental Art Center', coords: [121.51, 31.22] }
            ];
            
            testVenues.forEach((venue, index) => {
                const latRadius = 0.02;
                const lonRadius = 0.025;
                
                const bounds = [
                    [venue.coords[0] - lonRadius, venue.coords[1] - latRadius],
                    [venue.coords[0] + lonRadius, venue.coords[1] + latRadius]
                ];
                
                const rangeKm = Math.sqrt(
                    Math.pow((bounds[1][0] - bounds[0][0]) * 96, 2) +
                    Math.pow((bounds[1][1] - bounds[0][1]) * 111, 2)
                );
                
                testResult += currentLanguage === 'en' ? `Venue ${index + 1}: ${venue.name}\n` : `Âú∫Âú∞ ${index + 1}: ${venue.name}\n`;
                testResult += currentLanguage === 'en' ? `  Coordinates: [${venue.coords[0]}, ${venue.coords[1]}]\n` : `  ÂùêÊ†á: [${venue.coords[0]}, ${venue.coords[1]}]\n`;
                testResult += currentLanguage === 'en' ? `  Calculated Range: ${rangeKm.toFixed(1)}km\n` : `  ËÆ°ÁÆóËåÉÂõ¥: ${rangeKm.toFixed(1)}km\n`;
                testResult += currentLanguage === 'en' ? `  Bounds: [${bounds[0][0].toFixed(4)}, ${bounds[0][1].toFixed(4)}] to [${bounds[1][0].toFixed(4)}, ${bounds[1][1].toFixed(4)}]\n` : `  ËæπÁïå: [${bounds[0][0].toFixed(4)}, ${bounds[0][1].toFixed(4)}] Âà∞ [${bounds[1][0].toFixed(4)}, ${bounds[1][1].toFixed(4)}]\n`;
                testResult += currentLanguage === 'en' ? `  Result: ${Math.abs(rangeKm - 6.5) < 1 ? '‚úÖ Correct' : '‚ùå Error'}\n\n` : `  ÁªìÊûú: ${Math.abs(rangeKm - 6.5) < 1 ? '‚úÖ Ê≠£Á°Æ' : '‚ùå ÈîôËØØ'}\n\n`;
            });
            
            result.innerHTML = testResult;
        }
    </script>
</body>
</html> 